<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Register</title>

    <script src="js/angular.min.js"></script>
    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>

</head>
<body>
    <div data-role="page">
        <div data-role="header">
            <h1>Register</h1>
        </div>
        <div role="main" class="ui-content">
            <div ng-app="myApp" ng-controller="myCtrl">
                <form action="#" ng-submit="Register()" name="myForm">
                    <h2 class="intro" align="center">สมัครสมาชิก เพื่อใช้งานโปรแกรมจองที่จอดรถ</h2>
                    <h4 class="intro" align="center">กรุณากรอกข้อมูลให้ครบทุกช่อง</h4>
                    <h3>First name: <input type="text" name="FirstName" ng-model="FirstName" required /></h3>
                    <span style="color:red" ng-show="myForm.FirstName.$dirty && myForm.FirstName.$invalid">
                        <span ng-show="myForm.FirstName.$error.required">First name is required.</span>
                    </span>
                    <h3>Last name: <input type="text" name="LastName" ng-model="LastName" required /></h3>
                    <span style="color:red" ng-show="myForm.LastName.$dirty && myForm.LastName.$invalid">
                        <span ng-show="myForm.LastName.$error.required">Last name is required.</span>
                    </span>
                    <h3>Telephone number: <input type="text" name="PhoneNo" ng-model="PhoneNo" required /></h3>
                    <span style="color:red" ng-show="myForm.PhoneNo.$dirty && myForm.LastName.$invalid">
                        <span ng-show="myForm.PhoneNo.$error.required">Telephone number is required.</span>
                    </span>
                    <h3>E-mail: <input type="text" name="Email" ng-model="Email" required /></h3>
                    <span style="color:red" ng-show="myForm.Email.$dirty && myForm.Email.$invalid">
                        <span ng-show="myForm.Email.$error.required">E-mail is required.</span>
                    </span>
                    <h3>User name: <input type="text" name="UserName" ng-model="UserName" required /></h3>
                    <span style="color:red" ng-show="myForm.UserName.$dirty && myForm.UserName.$invalid">
                        <span ng-show="myForm.UserName.$error.required">User name is required.</span>
                    </span>
                    <h3>Password: <input type="text" name="Password" ng-model="Password" required /></h3>
                    <span style="color:red" ng-show="myForm.Password.$dirty && myForm.Password.$invalid">
                        <span ng-show="myForm.Password.$error.required">Password name is required.</span>
                    </span>
                    <h3>Re-Password: <input type="text" name="RePassword" ng-model="RePassword" required /></h3>
                    <span style="color:red" ng-show="myForm.RePassword.$dirty && myForm.RePassword.$invalid">
                        <span ng-show="myForm.RePassword.$error.required">Re-Password is required.</span>
                    </span>
                    <button ng-disabled="myForm.FirstName.$dirty && myForm.FirstName.$invalid ||
                            myForm.LastName.$dirty && myForm.LastName.$invalid ||
                            myForm.PhoneNo.$dirty && myForm.PhoneNo.$invalid ||
                            myForm.Email.$dirty && myForm.Email.$invalid ||
                            myForm.Password.$dirty && myForm.Password.$invalid
                            "
                            ng-click="Register()">
                        ลงทะเบียน
                    </button>
                    <input type="submit" name="login" value="ลงทะเบียน" />
                </form>
            </div>
            <script>
                var app = angular.module('myApp', []);
                app.controller('myCtrl', function ($scope, $http, $window) {
                    $scope.Register = function () {
                        var post = $http({
                            method: "POST",
                            url: "http://carparking.prodevelopment.net/Users/Create",
                            dataType: 'json',
                            data: {
                                FirstName: $scope.FirstName,
                                LastName: $scope.LastName,
                                PhoneNo: $scope.PhoneNo,
                                Email: $scope.Email,
                                UserName: $scope.UserName,
                                Password: $scope.Password
                            },
                            headers: { "Content-Type": "application/json" }
                        }).then(function successCallback(response) {
                            alert("Save Success");
                        }, function errorCallback(response) {
                            alert("Error");
                        });
                    }
                });
            </script>
        </div>
        <div data-role="footer">
            <h4></h4>
        </div>
    </div>
</body>
</html>
